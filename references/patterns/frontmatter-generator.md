# YAML Frontmatter Generator

Generate spec-compliant YAML frontmatter for SKILL.md files.

## Specification Requirements

From Agent Skills Spec v1.0:
- `name`: Required, hyphen-case, ≤64 characters
- `description`: Required, ≤1024 characters
- `allowed-tools`: Optional, list of valid tool names
- `metadata`: Optional, additional key-value pairs

## Valid Tool Names

```yaml
allowed_tools:
  - Read          # Read files
  - Write         # Create/overwrite files
  - Edit          # Edit existing files
  - Bash          # Execute shell commands
  - Glob          # Pattern match files
  - Grep          # Search file contents
  - WebFetch      # Fetch web content
  - WebSearch     # Search the web
  - Task          # Launch subagents
  - AskUserQuestion  # Interactive questions
  - TodoWrite     # Task tracking
  - LSP           # Language server protocol
  - NotebookEdit  # Jupyter notebook editing
```

## Generation Algorithm

```markdown
FUNCTION generate_frontmatter(blueprint, discovery):
    frontmatter = {}

    # Step 1: Generate name
    name = normalize_name(blueprint.skill_name)
    ASSERT len(name) <= 64, "Name too long"
    ASSERT is_hyphen_case(name), "Name must be hyphen-case"
    frontmatter.name = name

    # Step 2: Generate description
    description = generate_description(discovery)
    ASSERT len(description) <= 1024, "Description too long"
    frontmatter.description = description

    # Step 3: Determine allowed tools
    tools = determine_tools(blueprint.skill_type, discovery)
    frontmatter.allowed_tools = tools

    # Step 4: Add metadata
    frontmatter.metadata = {
        version: "1.0.0",
        author: discovery.author or "Generated",
        tags: extract_tags(discovery)
    }

    RETURN frontmatter
```

## Name Normalization

```markdown
FUNCTION normalize_name(raw_name):
    # Remove special characters
    name = raw_name.lower()
    name = replace(name, /[^a-z0-9-\s]/, "")

    # Convert spaces to hyphens
    name = replace(name, /\s+/, "-")

    # Remove consecutive hyphens
    name = replace(name, /-+/, "-")

    # Trim hyphens from ends
    name = trim(name, "-")

    # Ensure starts with letter
    IF NOT matches(name, /^[a-z]/):
        name = "skill-" + name

    # Truncate if needed
    IF len(name) > 64:
        name = name[:64]
        # Don't end with hyphen
        name = rtrim(name, "-")

    RETURN name
```

## Description Generation

```markdown
FUNCTION generate_description(discovery):
    # Template: {Verb} {output} {qualifier}
    verb = get_verb_for_type(discovery.skill_type)
    output = discovery.primary_output
    qualifier = discovery.target_context

    base = f"{verb} {output}"

    IF qualifier:
        base += f" {qualifier}"

    # Add key capability if room
    IF len(base) < 900 AND discovery.key_capability:
        base += f". {discovery.key_capability}"

    # Ensure under limit
    IF len(base) > 1024:
        base = base[:1021] + "..."

    RETURN base
```

### Verbs by Skill Type

| Type | Verbs |
|------|-------|
| Builder | Generates, Creates, Builds, Produces |
| Guide | Guides, Teaches, Explains, Helps with |
| Automation | Automates, Executes, Runs, Performs |
| Analyzer | Analyzes, Examines, Reviews, Inspects |
| Validator | Validates, Checks, Verifies, Ensures |

## Tool Selection

```markdown
FUNCTION determine_tools(skill_type, discovery):
    # Base tools for all skills
    tools = ["Read"]

    # Type-specific additions
    SWITCH skill_type:
        CASE "Builder":
            tools.extend(["Write", "Edit", "Glob"])
            IF discovery.uses_templates:
                tools.append("Grep")

        CASE "Guide":
            tools.extend(["Glob", "Grep"])
            IF discovery.uses_web_research:
                tools.extend(["WebSearch", "WebFetch"])

        CASE "Automation":
            tools.extend(["Write", "Edit", "Bash"])
            IF discovery.uses_subagents:
                tools.append("Task")

        CASE "Analyzer":
            tools.extend(["Glob", "Grep"])
            IF discovery.outputs_report:
                tools.append("Write")

        CASE "Validator":
            tools.extend(["Glob", "Grep", "Bash"])
            IF discovery.has_auto_fix:
                tools.append("Edit")

    # Interactive tools
    IF discovery.requires_user_input:
        tools.append("AskUserQuestion")

    IF discovery.has_multi_step_workflow:
        tools.append("TodoWrite")

    # Remove duplicates, maintain order
    RETURN unique(tools)
```

## Metadata Generation

```markdown
FUNCTION generate_metadata(discovery, blueprint):
    metadata = {
        version: "1.0.0"
    }

    # Author
    IF discovery.author:
        metadata.author = discovery.author
    ELSE:
        metadata.author = "Generated by platxa-skill-generator"

    # Tags (max 5)
    tags = []
    tags.append(blueprint.skill_type.lower())
    tags.extend(discovery.domain_tags[:4])
    metadata.tags = unique(tags)[:5]

    # Optional fields
    IF discovery.repository:
        metadata.repository = discovery.repository

    RETURN metadata
```

## Output Format

### Valid Frontmatter Example

```yaml
---
name: api-doc-generator
description: Generates comprehensive API documentation from OpenAPI specifications. Supports Markdown, HTML, and PDF output formats with customizable templates.
allowed-tools:
  - Read
  - Write
  - Edit
  - Glob
  - Grep
  - AskUserQuestion
metadata:
  version: "1.0.0"
  author: "Generated by platxa-skill-generator"
  tags:
    - builder
    - api
    - documentation
    - openapi
---
```

### Minimal Valid Frontmatter

```yaml
---
name: my-skill
description: A skill that does something useful for developers.
---
```

## Validation

```markdown
FUNCTION validate_frontmatter(frontmatter):
    errors = []

    # Name validation
    IF NOT frontmatter.name:
        errors.append("name is required")
    ELIF len(frontmatter.name) > 64:
        errors.append("name exceeds 64 characters")
    ELIF NOT matches(frontmatter.name, /^[a-z][a-z0-9-]*[a-z0-9]$/):
        errors.append("name must be hyphen-case")

    # Description validation
    IF NOT frontmatter.description:
        errors.append("description is required")
    ELIF len(frontmatter.description) > 1024:
        errors.append("description exceeds 1024 characters")

    # Tools validation
    valid_tools = get_valid_tools()
    FOR tool in frontmatter.allowed_tools or []:
        IF tool NOT IN valid_tools:
            errors.append(f"unknown tool: {tool}")

    RETURN len(errors) == 0, errors
```

## Integration

### Input

```json
{
  "blueprint": {
    "skill_name": "api-doc-generator",
    "skill_type": "Builder"
  },
  "discovery": {
    "primary_output": "API documentation",
    "target_context": "from OpenAPI specifications",
    "key_capability": "Supports multiple output formats",
    "uses_templates": true,
    "requires_user_input": true
  }
}
```

### Output

```yaml
---
name: api-doc-generator
description: Generates API documentation from OpenAPI specifications. Supports multiple output formats.
allowed-tools:
  - Read
  - Write
  - Edit
  - Glob
  - Grep
  - AskUserQuestion
metadata:
  version: "1.0.0"
  author: "Generated by platxa-skill-generator"
  tags:
    - builder
    - api
    - documentation
---
```
